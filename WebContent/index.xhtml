<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Bem vindo ao maior portal de cardápios!</title>
	<script src="http://maps.google.com/maps/api/js?sensor=false" 
          type="text/javascript"></script>
	<h:form>
		<p:menubar style="padding-right:19px;padding-left:19px;">
			<p:menuitem value="Home" icon="ui-icon-home" iconPos="top"
				style="padding-right:19px" />
			<p:menuitem action="/publico/catalogo.jsf?faces-redirect=true" value="Cardapio" style="padding-right:19px" />
			<f:facet name="options">
				<p:menuitem>
					<p:commandButton onclick="PF('dlg').show()" value="Area restrita"
						icon="ui-icon-locked" iconPos="left" style="padding-right:19px" />
				</p:menuitem>
			</f:facet>
		</p:menubar>
	</h:form>

</h:head>

<h:body>
	<form id="login" method="post"
		action="#{request.contextPath}/j_spring_security_check">
		<p:dialog header="Area restrita" widgetVar="dlg"
			visible="#{!empty param.login_error}" resizable="false"
			closable="false" showEffect="blind">
			<br />
			<div style="width: 100%">
				<table style="width: 100%">
					<tr>
						<td>Login</td>
						<td><input type="text" name="j_username" maxlength="25"
							style="width: 100%" /></td>
					</tr>
					<tr>
						<td>Senha</td>
						<td><input type="password" name="j_password" maxlength="25"
							style="width: 100%" /></td>
					</tr>
					<tr>
						<td align="right"><input type="checkbox"
							name="_spring_security_remember_me" /></td>
						<td>Entrar automaticamente</td>
					</tr>
					<tr align="left">
						<td></td>
						<td><a href="publico/usuario.jsf" style="align: left;font-size: 12px">Ainda não é cadastrado? Clique aqui.</a> </td>
					</tr>
					<tr align="right">
						<td></td>
						<td></td>
						<td><input type="submit" value="Entrar" /></td>
					</tr>
				</table>
				<script>
					document.getElementById("login").j_username.value = "#{SPRING_SECURITY_LAST_USERNAME}";
				</script>
			</div>
			<h:panelGroup rendered="#{!empty param.login_error}" layout="block">
				<p:outputLabel style="color:red;font-size:11px"
					value="Motivo: #{SPRING_SECURITY_LAST_EXCEPTION.message}" />
			</h:panelGroup>
		</p:dialog>
	</form>
</h:body>
</html>